<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Video Layer â€” Worker-based MediaPipe Processor</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>
<header>
  <h1>Video Layer â€” Worker-based MediaPipe Processor</h1>
  <p class="lead">MediaPipe segmentation (main thread) + worker accumulation/effects. Multi-file, robust, non-blocking.</p>
</header>

<main>
  <section class="mediaBox">
    <div class="mediaInner">
      <input id="videoInput" type="file" accept="video/*">
      <video id="sourceVideo" controls playsinline></video>
      <canvas id="displayCanvas" aria-label="Processed output"></canvas>
      <video id="previewVideo" controls style="display:none; width:100%; max-width:840px; border-radius:10px; background:#000;"></video>
    </div>
  </section>

  <section class="controls">
    <select id="modeSelect" class="aux" title="Segmentation mode">
      <option value="person">Person (MediaPipe)</option>
      <option value="motion">Motion (frame diff)</option>
      <option value="hybrid">Hybrid (person + motion)</option>
    </select>

    <select id="effectSelect" class="aux">
      <option value="remove">Remove background</option>
      <option value="blur">Blur background</option>
      <option value="replaceColor">Replace background color</option>
      <option value="desaturate">Desaturate background</option>
      <option value="isolateColor">Isolate foreground color</option>
    </select>

    <input id="replaceColor" type="color" value="#0d1117" title="Background color">

    <button id="processBtn" disabled>Process</button>
    <button id="regenerateBtn" disabled>Regenerate</button>

    <button id="likeBtn" disabled>ğŸ‘ Like</button>
    <button id="dislikeBtn" disabled>ğŸ‘ Dislike</button>

    <button id="downloadBtn" disabled>ğŸ’¾ Download</button>
  </section>

  <div class="progressWrap">
    <div class="progress"><div id="progressFill"></div></div>
  </div>

  <div id="status">Initializing â€” loading model...</div>
</main>

<script type="module" src="./main.js"></script>
</body>
</html>