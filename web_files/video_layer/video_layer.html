<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>AI Video Layer — Mobile-friendly</title>
<link rel="stylesheet" href="style.css" />
<!-- MediaPipe and OpenCV are loaded inside workers or as needed; main page keeps lean -->
<script src="detector.js" defer></script>
</head>
<body>
<header class="topbar">
  <h1>AI Video Layer</h1>
  <p class="subtitle">Segmentation · Blur · Object exclusion — in-browser, worker-based</p>
</header>

<main class="container">
  <section class="controls">
    <label class="control-row">
      <span class="label">Select video</span>
      <input id="videoInput" type="file" accept="video/*" />
    </label>

    <label class="control-row">
      <span class="label">Effect</span>
      <select id="effectSelect">
        <option value="none">None</option>
        <option value="bgRemove">Background removal</option>
        <option value="bgBlur">Background blur</option>
        <option value="objectExclude">Object exclusion</option>
      </select>
    </label>

    <label class="control-row">
      <span class="label">Quality</span>
      <input id="qualityRange" type="range" min="0.25" max="1" step="0.25" value="1" />
      <small id="qualityLabel">Full</small>
    </label>

    <div class="button-row">
      <button id="startBtn" class="btn-primary">Start</button>
      <button id="pauseBtn" class="btn-secondary" disabled>Pause</button>
      <button id="stopBtn" class="btn-danger" disabled>Stop</button>
      <button id="downloadBtn" class="btn-download" disabled>Download</button>
    </div>

    <div class="info-row">
      <div id="status">Idle.</div>
      <div id="fps" aria-hidden="true"></div>
    </div>
  </section>

  <section class="canvas-wrap">
    <!-- Canvas will show processed video (and is recorded) -->
    <canvas id="outputCanvas" playsinline></canvas>
  </section>
</main>

<footer class="footer">
  <small>Designed for local use. Works offline once files are present. Uses Web Workers and MediaRecorder.</small>
</footer>

<script>
/* Minimal boot strap: all heavy logic lives in detector.js as VideoProcessor class */
</script>
</body>
</html>